# Aura Helper Ignore Module
Module to ignore metadata from your salesforce projects or from a JSON metadata object. This module will be specially util in some use cases, like Custom Label values unique for every environment (like ids...), or to avoid deploy some user permissions, or when you creating autogenerated package (from git for example) and like to excludo some metadata automatically. 

This module is used to [@ah/package-generator](https://github.com/JJLongoria/aura-helper-package-generator) for ignore metadata types when created the package or detructive XML files.

# [Usage](#usage)

## [Ignore Metadata from JSON Metadata Object](#ignore-json-metadata)
You can ignore metadata from a JSON Metadata Object (the JSON used in [@ah/package-generator](https://github.com/JJLongoria/aura-helper-package-generator) to created the package XML files) with a simple method.


### **Ignore Metadata from Metadata JSON Object**
    const Ignore = require('@ah/ignore');

    // Uncheck elements from Metadata JSON Object to avoid put in package XML Files
    let result = Ignore.ignoreMetadata('path/to/json/file', './path/to/ignore/file');

    console.log(result);    // Return a JSON Metadata Object with ignored metadata unchecked for exclude when created the pacakges XML files

***

### **Ignore Specified Metadata from Metadata JSON Object**
    const Ignore = require('@ah/ignore');

    // Uncheck specified metadata elements from Metadata JSON Object to avoid put in package XML Files
    const typesForIgnore = ['CustomObject'];    // Optional parameter to ignore metadata. This parameter is used to ignore only the specified metadata on it (also must 
                                                // be in ignore file) and avoid ignore all metadata types specified on the file. For example, you have an ignore file
                                                // with CustomObjects, CustomFields and CustomLabels and you only need to ignore the CustomObjects.

    let result = Ignore.ignoreMetadata('path/to/json/file', './path/to/ignore/file', typesForIgnore);
    
    console.log(result);    // Return a JSON Metadata Object with ignored metadata unchecked for exclude when created the pacakges XML files

***

### **Ignore Metadata and Remove from Metadata JSON Object**
    const Ignore = require('@ah/ignore');

    // Remove elements from Metadata JSON Object to avoid put in package XML Files
    const remove = true;
    let result = Ignore.ignoreMetadata('path/to/json/file', './path/to/ignore/file', undefined, remove);

    console.log(result);    // Return a JSON Metadata Object with ignored metadata removed from thhe object for exclude when created the pacakges XML files

***

## [Ignore Metadata from Project](#ignore-project-metadata)
Ignore Metadata from your Salesforce Project. This option can remove entire file or folders from your project, or remove some metadata into your files like some custom labels from the custom labels file, or workflow alerts from your Account workflow file for example. For this operation, also need a Metadata Details from your salesforce project. You can get it with [@ah/connector](https://github.com/JJLongoria/aura-helper-connector) from your org using the listMetadataTypes() method. Also allow to you to compress files with the [@ah/xml-compressor](https://github.com/JJLongoria/aura-helper-xml-compressor)

    const Ignore = require('@ah/ignore');
    const Connection = require('@ah/connector');
    const { SORT_ORDER } = require('@ah/xml-compressor');
    
    // Get Metadata Details from your org using @ah/connector
    const connection = new Connection('MyOrg', '50');
    connection.setUsernameOrAlias('MyOrg');
    connection.setSingleThread();
    connection.listMetadataTypes().then((metadataDetails) => {
        Ignore.ignoreProjectMetadata('path/to/your/project', metadataDetails, './path/to/ignore/file');

        // Like on Ignore Metadata method, you can choose an optional metadata types for ignore
        const options = {
            typesForIgnore:  ['CustomObject', 'CustomField', 'ApexClass'],
        }
        Ignore.ignoreProjectMetadata('path/to/your/project', metadataDetails, './path/to/ignore/file', options);

        // Also you can choose to compress the modified files with @ah/xml-compressor
        const options = {
            typesForIgnore:  ['CustomObject', 'CustomField', 'ApexClass'],
            compress: true,
            sortOrder: SORT_ORDER.SIMPLE_FIRST      // Yoy can choose a sort order for compression
        }
        Ignore.ignoreProjectMetadata('path/to/your/project', metadataDetails, './path/to/ignore/file', options);
    }).catch((error) => {
        
    });